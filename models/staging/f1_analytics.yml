version: 2

sources: 
  - name: f1_analytics
    description: Formula 1 data from Kaggle
    database: f1-analytics-328910
    tables:
      - name: tbl_races
        description: Raw race data
        columns:
          - name: raceid
            description: Primary key for races
            tests:
              - unique
              - not_null
      - name: tbl_constructor_standings
      - name: tbl_constructors
      - name: tbl_drivers
      - name: tbl_seasons
      - name: tbl_circuits
      - name: tbl_constructor_results
      - name: tbl_results
      - name: tbl_status

models:
  - name: stg_races
    description: Reorganised race data, one unique race per row
    columns:
      - name: raceid
        description: primary key for races
        tests:
          - not_null
          - unique
      - name: date_of_race
        description: Date the race was run
        tests:
        - not_null 
  - name: races
    description: races, the results and whether we attended in person
    columns:
      - name: date_of_race
        description: the date of the race
      - name: name_of_race
        description: the race name
      - name: winning_constructor
        description: which constructor won the race, "Not yet raced" if the race hasn't taken place yet
      - name: winning_driver
        description: concatenation of first and last name of the winning driver, "Not yet raced" if the race hasn't taken place yet
      - name: watched_live
        description: did we go and watch the race in person, "Yes" if affirmative
  - name: driver_standings
    description: historical driver totals
    columns:
      - name: driver_name
        description: name of the driver
      - name: wins
        description: total number of wins in career
      - name: total_points
        description: total number of points accrued in career
      - name: total_poles
        descrption: total number of pole poisitions in career

      